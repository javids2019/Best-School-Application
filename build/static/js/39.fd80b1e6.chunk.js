(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{246:function(e,a,t){"use strict";t.r(a);var n=t(20),r=t(0),o=t.n(r),s=t(30),c=(t(122),t(161)),l=(t(46),t(33),t(94)),i=t(29);a.default=function(){var e=Object(r.useState)(""),a=Object(n.a)(e,2),t=a[0],u=a[1],m=Object(r.useState)(""),d=Object(n.a)(m,2),g=d[0],f=d[1],p=Object(r.useState)(""),h=Object(n.a)(p,2),v=h[0],E=h[1];Object(r.useEffect)(function(){s.a.auth().signOut(),l.a.logout()},[]);var N=function(){u(""),f("")};return o.a.createElement(i.a,null,o.a.createElement("div",{className:"auth-wrapper"},o.a.createElement("div",{className:"auth-content"},o.a.createElement("div",{className:"auth-bg"},o.a.createElement("span",{className:"r"}),o.a.createElement("span",{className:"r s"}),o.a.createElement("span",{className:"r s"}),o.a.createElement("span",{className:"r"})),o.a.createElement("div",{className:"card"},o.a.createElement("div",{className:"card-body text-center"},o.a.createElement("div",{className:"mb-4"},o.a.createElement("i",{className:"feather icon-unlock auth-icon"})),o.a.createElement("h3",{className:"mb-4"},"Login"),o.a.createElement("div",{className:"input-group mb-3"},o.a.createElement("input",{type:"email",className:"form-control",placeholder:"Email",value:t,onChange:function(e){return u(e.target.value)}})),o.a.createElement("div",{className:"input-group mb-4"},o.a.createElement("input",{type:"password",className:"form-control",placeholder:"password",value:g,onChange:function(e){return f(e.target.value)}})),o.a.createElement("div",{className:"form-group text-center"},o.a.createElement("label",{className:"text-danger"},v)),o.a.createElement("button",{className:"btn btn-primary shadow-2 mb-4",onClick:function(){s.a.auth().signInWithEmailAndPassword(t.toLowerCase(),g).then(function(e){N(),void 0!=e.user&&null!=e.user&&s.a.firestore().collection("users").where("email","==",t.toLowerCase()).get().then(function(e){e.forEach(function(e){var a=e.data();l.a.login(a.name,a.email.toLowerCase(),a.role),window.location.href="/user/userdashboard"})}).catch(function(e){E(e.message),console.log("Error getting documents: ",e)})}).catch(function(e){"auth/user-not-found"===e.code?E("No record found, Kindly Sign up"):E(e.message),console.error(e)})}},"Login"),o.a.createElement("p",{className:"mb-0 text-muted"},"Don\u2019t have an account? ",o.a.createElement(c.a,{to:"/auth/register"},"Signup")))))))}},94:function(e,a,t){"use strict";t.d(a,"a",function(){return o});var n=t(30),r=t(87),o={login:function(e,a,t){localStorage.setItem("user",JSON.stringify({name:e,email:a,role:t})),this.addLoginHistory(e,a,"LogIn")},logout:function(){var e=this.getCurrentUser();e&&this.addLoginHistory(e.name,e.email,"LogOut");localStorage.removeItem("user")},getCurrentUser:function(){return JSON.parse(localStorage.getItem("user"))},getDisplayName:function(){var e=JSON.parse(localStorage.getItem("user"));return null!=e?e.name:""},getCurrentRole:function(){var e=JSON.parse(localStorage.getItem("user"));return null!=e?e.role:""},getIsCurrentAdminRole:function(e){var a=JSON.parse(localStorage.getItem("user"));return a&&a.role==e},addLoginHistory:function(e,a,t){var o={id:Object(r.v4)(),name:e,email:a,type:t,loginAt:n.a.firestore.FieldValue.serverTimestamp(),lastUpdate:n.a.firestore.FieldValue.serverTimestamp()};n.a.firestore().collection("loginhistory").doc(o.id).set(o).catch(function(e){console.error(e)})}}}}]);
//# sourceMappingURL=39.fd80b1e6.chunk.js.map